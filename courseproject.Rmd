---
title: "Practical Machine Learning - Course Project"
author: by John Pelak
output:
  html_document:
    keep_md: yes
  word_document: default
---

## Predicting Exercise Quality from Motion Sensor Data

### Overview
Use of devices to track exercise activity is becoming increasingly popular, with sales growing as costs decrease and software becomes more feature-rich.  While considerable study has been conducted on the recognition of distinct activities (e.g., standing, climbing stairs), much far less analysis of the quality of exercise activity has been published.  To this end, [Groupware@LES](http://groupware.les.inf.puc-rio.br) has built a [data set](http://groupware.les.inf.puc-rio.br/static/WLE/WearableComputing_weight_lifting_exercises_biceps_curl_variations.csv) tracking motion of 6 subjects lifting weights properly and improperly, suitable for training and testing predictive models.  It is the goal of this project to build such a predictive model and assess its performance and accuracy.

```{r libraries, echo=TRUE}
library(caret)
```

### Loading Data
The Groupware@LES data used for this project (published in [Qualitative Activity Recognition of Weight Lifting Exercises](http://groupware.les.inf.puc-rio.br/work.jsf?p1=11201)) have been nicely partitioned with a large set of features (>150) to be used to predict a labelled outcome.  Each observation in this data set has been labelled A, B, C, D, or E, signifying correct lifting motion, elbows-forward lifting motion, halfway up lifting motion, halfway down lifting motion, and hips-forward lifting motion respectively.  The features present in the data set along with the label contained in the last column ('classe') are as shown:

```{r loadingData, echo=TRUE}
harTrainingDataRaw <- read.csv("pml-training.csv")
```

### Cleaning Data
After loading, the data used in this analysis was then cleaned so that it was more readily consumable by functions in the R language's caret package.  In the training data set, first the row number, user name, raw timestamp (parts 1 and 2), cvtd timestamp, new window, and num window columns (columns 1 through 7) were removed, as we have not yet covered time series prediction.  Then, remaining predictor columns were tested for NA values and filtered out.  Finally, all columns with near zero varaince (like kurtosis yaw belt, skewness yaw belt, amplitude yaw belt, kurtosis yaw dumbbell, skewness yaw dumbbell, amplitude yaw dumbbell, kurtosis yaw forearm, skewness yaw forearm, and amplitude yaw forearm) were all eliminated.

```{r cleanData, echo=TRUE}
harTrainingData <- harTrainingDataRaw[,-1:-7]
na_var <- apply(!is.na(harTrainingData),2,sum) #identifying the no of NAs in each column
na_var <- na_var == nrow(harTrainingData)  #Identifying columns that don't have complete data without NA
harTrainingData2 <- harTrainingData[ , na_var]  #Filtering out variables with NA values
harTrainingData3 <- harTrainingData2[,-nearZeroVar(harTrainingData2)]
```

### Model Development
The R language's caret package contains a strong set of tools useful for building predictive models.  Even with a filtered data set, such a large set of features took too much time for my machine to complete generating the predictive model in time for this submission.  Course discussion forums suggest that the Random Forest model yields good results for making these predictions, and so I will run the model generation and submit my predicted results before the end of the course.

```{r principalComponentAnalysis, echo=TRUE}
inTrain = createDataPartition(y = harTrainingData3$classe, p = 0.7, list = FALSE)
trainModel <- harTrainingData3[inTrain,]
testModel <- harTrainingData3[-inTrain,]
#randomForestModel = train(classe ~ ., method = "rf", data = harTrainingData3)
```

I will complete the predictions on the test data by the end of the course.